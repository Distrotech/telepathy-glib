<!-- This information will be incorporated into the spec eventually -->
<tp:spec
  xmlns:tp="http://telepathy.freedesktop.org/wiki/DbusSpec#extensions-v0">

  <tp:mapping name="Alias_Map" array-name="">
    <tp:docstring>A dictionary whose keys are contact handles and whose
      values are aliases.</tp:docstring>
    <tp:member type="u" tp:type="Contact_Handle" name="Handle"/>
    <tp:member type="s" name="Alias"/>
  </tp:mapping>

  <tp:struct name="Alias_Pair" array-name="Alias_Pair_List">
    <tp:docstring>A pair (contact handle, alias) as seen in the AliasesChanged
      signal.</tp:docstring>
    <tp:member type="u" tp:type="Contact_Handle" name="Handle"/>
    <tp:member type="s" name="Alias"/>
  </tp:struct>

  <tp:struct name="Capability_Pair" array-name="Capability_Pair_List">
    <tp:docstring>A pair (channel type, type-specific flags) as passed to
      AdvertiseCapabilities on the Capabilities interface.</tp:docstring>
    <tp:member type="s" tp:type="DBus_Interface" name="Channel_Type"/>
    <tp:member type="u" name="Type_Specific_Flags"/>
  </tp:struct>

  <tp:struct name="Contact_Capability" array-name="Contact_Capability_List">
    <tp:docstring>A struct (contact handle, channel type, generic flags,
      type-specific flags) representing a capability posessed by a contact,
      as returned by GetCapabilities on the Capabilities
      interface.</tp:docstring>
    <tp:member type="u" tp:type="Contact_Handle" name="Handle"/>
    <tp:member type="s" tp:type="DBus_Interface" name="Channel_Type"/>
    <tp:member type="u" tp:type="Connection_Capability_Flags"
               name="Generic_Flags"/>
    <tp:member type="u" name="Type_Specific_Flags"/>
  </tp:struct>

  <tp:struct name="Capability_Change" array-name="Capability_Change_List">
    <tp:docstring>A struct (contact handle, channel type, old generic flags,
      new generic flags, old type-specific flags, new type-specific flags)
      representing a change to one of a contact's capabilities, as seen in the
      CapabilitiesChanged signal on the Capabilities interface.</tp:docstring>
    <tp:member type="u" tp:type="Contact_Handle" name="Handle"/>
    <tp:member type="s" tp:type="DBus_Interface" name="Channel_Type"/>
    <tp:member type="u" tp:type="Connection_Capability_Flags"
               name="Old_Generic_Flags"/>
    <tp:member type="u" tp:type="Connection_Capability_Flags"
               name="New_Generic_Flags"/>
    <tp:member type="u" name="Old_Type_Specific_Flags"/>
    <tp:member type="u" name="New_Type_Specific_Flags"/>
  </tp:struct>

  <tp:struct name="Param_Spec" array-name="Param_Spec_List">
    <tp:docstring>A struct representing an allowed parameter, as returned
      by GetParameters on the ConnectionManager interface.</tp:docstring>
    <tp:member type="s" name="Name">
      <tp:docstring>A string parameter name</tp:docstring>
    </tp:member>
    <tp:member type="u" tp:type="Conn_Mgr_Param_Flags" name="Flags">
      <tp:docstring>A bitwise OR of the parameter flags</tp:docstring>
    </tp:member>
    <tp:member type="s" tp:type="DBus_Signature" name="Signature">
      <tp:docstring>A string containing the D-Bus type signature
        for this parameter</tp:docstring>
    </tp:member>
    <tp:member type="v" name="Default_Value">
      <tp:docstring>The default value (if the Has_Default flag is not
        present, there is no default and this takes some dummy value,
        which SHOULD be of the appropriate D-Bus type)</tp:docstring>
    </tp:member>
  </tp:struct>

  <tp:struct name="Channel_Info" array-name="Channel_Info_List">
    <tp:docstring>A struct representing a channel, as returned by
      ListChannels on the Connection interface.</tp:docstring>
    <tp:member type="o" name="Channel">
      <tp:docstring>The object path of the channel, which is on the
        same bus name as the connection</tp:docstring>
    </tp:member>
    <tp:member type="s" tp:type="DBus_Interface" name="Channel_Type">
      <tp:docstring>The channel's type</tp:docstring>
    </tp:member>
    <tp:member type="u" tp:type="Handle_Type" name="Handle_Type">
      <tp:docstring>The type of the handle that the channel communicates
        with, or 0 if there is no associated handle</tp:docstring>
    </tp:member>
    <tp:member type="u" tp:type="Handle" name="Handle">
      <tp:docstring>The handle that the channel communicates with,
        or 0 if there is no associated handle</tp:docstring>
    </tp:member>
  </tp:struct>

  <tp:struct name="Local_Pending_Info" array-name="Local_Pending_Info_List">
    <tp:docstring>A struct (handle to be added, handle of contact
      requesting the change, reason code, optional message)
      representing a contact whose attempt to join a group is to be confirmed
      by the local user, as returned by GetLocalPendingMembersWithInfo
      on the Group interface.</tp:docstring>
    <tp:member type="u" tp:type="Contact_Handle" name="To_Be_Added"/>
    <tp:member type="u" tp:type="Contact_Handle" name="Actor"/>
    <tp:member type="u" tp:type="Channel_Group_Change_Reason" name="Reason"/>
    <tp:member type="s" name="Message"/>
  </tp:struct>

  <tp:struct name="Pending_Text_Message" array-name="Pending_Text_Message_List">
    <tp:docstring>A struct (message ID, timestamp in seconds since
      1970-01-01 00:00 UTC, sender's handle, message type, flags, text)
      representing a pending text message, as returned by ListPendingMessages
      on the Text channel type. The arguments of the Received signal
      also match this struct's signature.</tp:docstring>
    <tp:member type="u" name="Message_ID"/>
    <tp:member type="u" name="Unix_Timestamp"/>
    <tp:member type="u" tp:type="Contact_Handle" name="Sender"/>
    <tp:member type="u" tp:type="Channel_Text_Message_Type"
               name="Message_Type"/>
    <tp:member type="u" tp:type="Channel_Text_Message_Flags" name="Flags"/>
    <tp:member type="s" name="Text"/>
  </tp:struct>

  <tp:struct name="Property_Spec" array-name="Property_Spec_List">
    <tp:docstring>A struct (property ID, property name, D-Bus signature,
      flags) representing a property, as returned by ListProperties on the
      Properties interface.</tp:docstring>
    <tp:member type="u" name="Property_ID"/>
    <tp:member type="s" name="name"/>
    <tp:member type="s" tp:type="DBus_Signature" name="signature"/>
    <tp:member type="u" tp:type="Property_Flags" name="Flags"/>
  </tp:struct>

  <tp:struct name="Property_Flags_Change"
    array-name="Property_Flags_Change_List">
    <tp:docstring>A struct (property ID, flags) representing a change to
      a property's flags, as seen in the PropertyFlagsChanged signal on
      the Properties interface.</tp:docstring>
    <tp:member type="u" name="Property_ID"/>
    <tp:member type="u" name="New_Flags"/>
  </tp:struct>

  <tp:struct name="Property_Value" array-name="Property_Value_List">
    <tp:docstring>A struct (property ID, value) representing a
      property's value, as seen in the PropertiesChanged signal on
      the Properties interface, returned by the GetProperties method
      and passed to the SetProperties method.</tp:docstring>
    <tp:member type="u" name="Property_ID"/>
    <tp:member type="v" name="Value"/>
  </tp:struct>

  <tp:struct name="Tube_Info" array-name="Tube_Info_List">
    <tp:docstring>A struct (tube ID, initiator handle, tube type,
      service name, parameters, state) representing a tube, as returned
      by ListTubes on the Tubes channel type.</tp:docstring>
    <tp:member type="u" name="Tube_ID"/>
    <tp:member type="u" tp:type="Contact_Handle" name="Initiator"/>
    <tp:member type="u" tp:type="Tube_Type" name="Type"/>
    <tp:member type="s" name="Service"/>
    <tp:member type="a{sv}" tp:type="String_Variant_Map" name="Parameters"/>
    <tp:member type="u" tp:type="Tube_State" name="State"/>
  </tp:struct>

  <tp:struct name="DBus_Tube_Member" array-name="DBus_Tube_Member_List">
    <tp:docstring>A struct (handle, unique name) representing a participant
      in a D-Bus tube, as returned by GetDBusNames on the Tubes channel
      type, and as seen in the DBusNamesChanged signal.</tp:docstring>
    <tp:member type="u" tp:type="Contact_Handle" name="Handle"/>
    <tp:member type="s" tp:type="DBus_Unique_Name" name="Unique_Name"/>
  </tp:struct>

  <tp:mapping name="String_Variant_Map">
    <tp:docstring>A mapping from strings to variants representing extra
      key-value pairs.</tp:docstring>
    <tp:member type="s" name="Key"/>
    <tp:member type="v" name="Value"/>
  </tp:mapping>

  <tp:mapping name="String_String_Map">
    <tp:docstring>A mapping from strings to strings representing extra
      key-value pairs.</tp:docstring>
    <tp:member type="s" name="Key"/>
    <tp:member type="s" name="Value"/>
  </tp:mapping>

  <!-- We hope to simplify these eventually -->
  <tp:mapping name="Multiple_Status_Map">
    <tp:docstring>Mapping used in Last_Activity_And_Statuses and passed to
      SetStatus, representing a collection of statuses. Use of this mapping
      with more than one member is deprecated.</tp:docstring>
    <tp:member type="s" name="Status"/>
    <tp:member type="a{sv}" tp:type="String_Variant_Map" name="Parameters"/>
  </tp:mapping>
  <tp:struct name="Last_Activity_And_Statuses" array-name="">
    <tp:docstring>Structure representing a contact's presence, containing
      a last-activity time (deprecated) and a Multiple_Status_Map.
    </tp:docstring>
    <tp:member type="u" tp:type="Unix_Timestamp" name="Last_Activity"/>
    <tp:member type="a{sa{sv}}" tp:type="Multiple_Status_Map"
      name="Statuses"/>
  </tp:struct>
  <tp:mapping name="Contact_Presences">
    <tp:docstring>Mapping returned by GetPresence and signalled by
      PresenceUpdate, where the keys are contacts and the values represent
      their presences.</tp:docstring>
    <tp:member type="u" tp:type="Contact_Handle" name="Contact"/>
    <tp:member type="(ua{sa{sv}})" tp:type="Last_Activity_And_Statuses"
      name="Presence"/>
  </tp:mapping>
  <tp:struct name="Status_Spec" array-name="">
    <tp:member type="u" tp:type="Connection_Presence_Type" name="Type"/>
    <tp:member type="b" name="May_Set_On_Self"/>
    <tp:member type="b" name="Exclusive"/>
    <tp:member type="a{ss}" tp:type="String_String_Map"
      name="Parameter_Types"/>
  </tp:struct>
  <tp:mapping name="Status_Spec_Map">
    <tp:member type="s" name="Identifier"/>
    <tp:member type="(ubba{ss})" tp:type="Status_Spec" name="Spec"/>
  </tp:mapping>

  <tp:struct name="Media_Stream_Info" array-name="Media_Stream_Info_List">
    <tp:member type="u" name="Identifier"/>
    <tp:member type="u" tp:type="Contact_Handle" name="Contact"/>
    <tp:member type="u" tp:type="Media_Stream_Type" name="Type"/>
    <tp:member type="u" tp:type="Media_Stream_State" name="State"/>
    <tp:member type="u" tp:type="Media_Stream_Direction" name="Direction"/>
    <tp:member type="u" tp:type="Media_Stream_Pending_Send"
      name="Pending_Send_Flags"/>
  </tp:struct>

  <tp:struct name="Room_Info" array-name="Room_Info_List">
    <tp:member type="u" tp:type="Room_Handle" name="Handle"/>
    <tp:member type="s" tp:type="DBus_Interface" name="Channel_Type"/>
    <tp:member type="a{sv}" tp:type="String_Variant_Map" name="Info"/>
  </tp:struct>

  <tp:struct name="Media_Stream_Handler_Candidate"
    array-name="Media_Stream_Handler_Candidate_List">
    <tp:member type="s" name="Name"/>
    <tp:member type="a(usuussduss)" name="Transports"
      tp:type="Media_Stream_Handler_Transport[]"/>
  </tp:struct>

  <tp:struct name="Media_Stream_Handler_Transport"
    array-name="Media_Stream_Handler_Transport_List">
    <tp:member type="u" name="Component_Number"/>
    <tp:member type="s" name="IP_Address"/>
    <tp:member type="u" name="Port"/>
    <tp:member type="u" tp:type="Media_Stream_Base_Proto" name="Protocol"/>
    <tp:member type="s" name="Subtype"/>
    <tp:member type="s" name="Profile"/>
    <tp:member type="d" name="Preference_Value"/>
    <tp:member type="u" tp:type="Media_Stream_Transport_Type"
      name="Transport_Type"/>
    <tp:member type="s" name="Username"/>
    <tp:member type="s" name="Password"/>
  </tp:struct>

  <tp:struct name="Media_Stream_Handler_Codec"
    array-name="Media_Stream_Handler_Codec_List">
    <tp:member type="u" name="Codec_ID"/>
    <tp:member type="s" name="Name"/>
    <tp:member type="u" tp:type="Media_Stream_Type" name="Media_Type"/>
    <tp:member type="u" name="Clock_Rate"/>
    <tp:member type="u" name="Number_Of_Channels"/>
    <tp:member type="a{ss}" name="Parameters" tp:type="String_String_Map"/>
  </tp:struct>

    <tp:struct name="Socket_Address_IPv4">
      <tp:docstring>An IPv4 address and port.</tp:docstring>
      <tp:member type="s" name="Address">
        <tp:docstring>A dotted-quad IPv4 address literal: four ASCII decimal
          numbers, each between 0 and 255 inclusive, e.g.
          "192.168.0.1".</tp:docstring>
      </tp:member>
      <tp:member type="q" name="Port">
        <tp:docstring>The TCP or UDP port number.</tp:docstring>
      </tp:member>
    </tp:struct>

    <tp:struct name="Socket_Address_IPv6">
      <tp:docstring>An IPv6 address and port.</tp:docstring>
      <tp:member type="s" name="Address">
        <tp:docstring>An IPv6 address literal as specified by RFC2373
          section 2.2, e.g. "2001:DB8::8:800:200C:4171".</tp:docstring>
      </tp:member>
      <tp:member type="q" name="Port">
        <tp:docstring>The TCP or UDP port number.</tp:docstring>
      </tp:member>
    </tp:struct>

    <tp:struct name="Socket_Netmask_IPv4">
      <tp:docstring>An IPv4 network or subnet.</tp:docstring>
      <tp:member type="s" name="Address">
        <tp:docstring>A dotted-quad IPv4 address literal: four ASCII decimal
          numbers, each between 0 and 255 inclusive, e.g.
          "192.168.0.1".</tp:docstring>
      </tp:member>
      <tp:member type="y" name="Prefix_Length">
        <tp:docstring>The number of leading bits of the address that must
          match, for this netmask to be considered to match an
          address.</tp:docstring>
      </tp:member>
    </tp:struct>

    <tp:struct name="Socket_Netmask_IPv6">
      <tp:docstring>An IPv6 network or subnet.</tp:docstring>
      <tp:member type="s" name="Address">
        <tp:docstring>An IPv6 address literal as specified by RFC2373
          section 2.2, e.g. "2001:DB8::8:800:200C:4171".</tp:docstring>
      </tp:member>
      <tp:member type="y" name="Prefix_Length">
        <tp:docstring>The number of leading bits of the address that must
          match, for this netmask to be considered to match an
          address.</tp:docstring>
      </tp:member>
    </tp:struct>


</tp:spec>
<!-- vim:set sw=2 sts=2 et: -->
